(this.webpackJsonpytterblog=this.webpackJsonpytterblog||[]).push([[0],{54:function(e,t,s){},55:function(e,t,s){},88:function(e,t,s){"use strict";s.r(t);var n=s(3),a=s(1),o=s.n(a),i=s(21),c=s.n(i),r=(s(54),s(11)),l=s(12),d=s(14),j=s(13),h=(s(55),s(18)),u=s(10),p=s(7),b=s(89),O=s(90),g=s(91),f=s(92),x=s(93),y=s(94),m=s(95),v=s(96),k=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).toggleNav=n.toggleNav.bind(Object(p.a)(n)),n.state={isNavOpen:!1},n}return Object(l.a)(s,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(b.a,{dark:!0,expand:"md",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(O.a,{onClick:this.toggleNav}),Object(n.jsx)(g.a,{className:"mr-auto",href:"/",children:Object(n.jsx)("img",{src:"/favicon-32x32.png",height:"32",width:"32",alt:"GY"})}),console.log("http://ytterb.orgfavicon-32x32.png"),Object(n.jsx)(f.a,{isOpen:this.state.isNavOpen,navbar:!0,children:Object(n.jsxs)(x.a,{className:"mr-auto",navbar:!0,children:[Object(n.jsx)(y.a,{children:Object(n.jsxs)(h.b,{className:"nav-link",to:"/home",children:[Object(n.jsx)("span",{className:"fa fa-home fa-lg"})," Home"]})}),Object(n.jsx)(y.a,{children:Object(n.jsxs)(h.b,{className:"nav-link",to:"/blog",children:[Object(n.jsx)("span",{className:"fa fa-info fa-lg"})," Blog"]})}),Object(n.jsx)(y.a,{children:Object(n.jsxs)(h.b,{className:"nav-link",to:"/about",children:[Object(n.jsx)("span",{className:"fa fa-info fa-lg"})," About"]})})]})})]})}),Object(n.jsx)(m.a,{style:{backgroundImage:"url(/photosquat-cropped.jpg)",backgroundSize:"cover"},children:Object(n.jsx)(v.a,{className:"jumbo-text col-md-offset-4",children:Object(n.jsxs)("div",{className:"header header-text",children:[Object(n.jsx)("h3",{children:"ytterb.org"}),Object(n.jsx)("p",{children:"The blog and portfolio of Gabriel Ytterberg"})]})})})]})}}]),s}(a.Component),N=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"footer footer-text",children:Object(n.jsx)("img",{src:"/favicon-32x32.png",height:"32",width:"32",alt:"GY"})})}}]),s}(a.Component),C=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Placeholder home page"}),Object(n.jsx)("p",{children:"About this site"}),Object(n.jsx)("p",{children:"..."})]})}}]),s}(a.Component),S=s(24),P=s(107),E=s(108),M=s(109),D=s(110),T=s(105),I=s(100),L=s(106),A="ADD_POST",_="ADD_POSTS",w="EDIT_POST",F="DELETE_POST",J="POSTS_LOADING",H="POSTS_LOADING_FAILED",B="POST_CREATION_FAILED",G="POST_EDIT_FAILED",R="POST_DELETED",X="POST_EDITED",Y="POST_DELETE_FAILED",q=s(19),z=s.n(q),U=function(e){return{type:A,payload:e}},K=function(e){return{type:B,payload:e}},Q=function(e){return{type:X,payload:e}},V=function(e){return{type:G,payload:e}},W=function(e){return{type:R,payload:e}},Z=function(e){return{type:Y,payload:e}},$=function(){return function(e){e(ee()),z.a.get("/api/posts/").then((function(t){return e(te(t))})).catch((function(t){e(se(t.message)),console.log(t)}))}},ee=function(){return{type:J}},te=function(e){return{type:_,payload:e}},se=function(e){return{type:H,payload:e}},ne=s(20),ae=s(97),oe=s(111),ie=s(98),ce=s(99),re=s(101),le=s(102),de=s(103),je=s(104),he=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={title:"",body:"",user:"gy",id:""},n.handleChange=n.handleChange.bind(Object(p.a)(n)),console.log(JSON.stringify(e)),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){"edit"===this.props.type&&this.setState({title:this.props.post.title,body:this.props.post.body,user:this.props.post.user,id:this.props.post.id})}},{key:"handleChange",value:function(e){var t=e.target,s=t.value,n=t.name;this.setState(Object(ne.a)({},n,s))}},{key:"render",value:function(){var e=this;return Object(n.jsx)(v.a,{children:Object(n.jsx)(ae.a,{className:"form",onSubmit:this.props.handleSubmit,children:Object(n.jsxs)(oe.a,{isOpen:!0,toggle:this.props.toggle,children:[Object(n.jsx)(ie.a,{toggle:this.props.toggle,children:"create"===this.props.type?"Create Post":"Edit Post"}),Object(n.jsx)(ce.a,{children:Object(n.jsxs)(I.a,{children:[Object(n.jsxs)(re.a,{children:[Object(n.jsx)(le.a,{children:"Title"}),Object(n.jsx)(de.a,{type:"text",name:"title",id:"title",placeholder:"Title",value:this.state.title,onChange:function(t){e.handleChange(t)}})]}),Object(n.jsxs)(re.a,{children:[Object(n.jsx)(le.a,{children:"Post"}),Object(n.jsx)(de.a,{type:"textarea",name:"body",id:"body",placeholder:"Body",value:this.state.body,onChange:function(t){e.handleChange(t)}})]})]})}),Object(n.jsx)(je.a,{children:Object(n.jsxs)(T.a,{"margin-right":0,"margin-left":0,children:[Object(n.jsx)(I.a,{children:Object(n.jsx)(L.a,{type:"submit",onClick:function(){"create"===e.props.type?e.props.handleSubmit(e.state.title,e.state.body,e.state.user):e.props.handleSubmit(e.state.title,e.state.body,e.state.user,e.state.id)},color:"success",children:"Submit"})}),Object(n.jsx)(I.a,{children:"edit"===this.props.type?Object(n.jsx)(L.a,{type:"submit",onClick:function(){e.props.handleDelete(e.state.id),e.props.history.push("/blog")},children:"Delete"}):null}),Object(n.jsx)(I.a,{children:Object(n.jsx)(L.a,{type:"button",onClick:this.props.toggle,children:"Cancel"})})]})})]})})})}}]),s}(a.Component),ue=Object(u.g)(he),pe=function(){return Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),Object(n.jsx)("p",{children:"Loading..."})]})},be=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var n;return Object(r.a)(this,s),(n=t.call(this,e)).state={createModal:!1,editModal:!1,editPost:{}},"undefined"!=typeof e.match.params.postId&&(n.state.postId=e.match.params.postId),n.handleCreate=n.handleCreate.bind(Object(p.a)(n)),n.toggleCreateModal=n.toggleCreateModal.bind(Object(p.a)(n)),n.toggleEditModal=n.toggleEditModal.bind(Object(p.a)(n)),n.handleEdit=n.handleEdit.bind(Object(p.a)(n)),n.handleDelete=n.handleDelete.bind(Object(p.a)(n)),console.log(JSON.stringify(e)),n.props.fetchPosts(),n}return Object(l.a)(s,[{key:"toggleCreateModal",value:function(){this.setState({createModal:!this.state.createModal}),console.log("In togglecreate, state: ",JSON.stringify(this.state))}},{key:"toggleEditModal",value:function(){this.setState({editModal:!this.state.editModal}),console.log("In toggleEdit, state: ",JSON.stringify(this.state))}},{key:"handleCreate",value:function(e,t,s){this.toggleCreateModal();var n={title:e,body:t,user:s};this.props.submitPost(n)}},{key:"handleEdit",value:function(e,t,s,n){var a={title:e,body:t,user:s,id:n};console.log("In handleEdit, newPost: ",JSON.stringify(a)),this.props.editPost(a),this.toggleEditModal(),this.setState({editPost:{}})}},{key:"handleDelete",value:function(e){console.log("In handleDelete",JSON.stringify(e)),this.props.deletePost(e),this.toggleEditModal(),this.setState({editPost:{}})}},{key:"renderPosts",value:function(){var e=this;if(!0===this.props.posts.isLoading)return Object(n.jsx)(pe,{});if(null!==this.props.posts.errMess)return Object(n.jsx)("div",{children:this.props.posts.errMess});if("undefined"==typeof this.state.postId&&Array.isArray(this.props.posts.posts.data)){console.log("How did we get here. Props: ",JSON.stringify(this.props));var t=this.props.posts.posts.data.sort((function(e,t){return e.posted>t.posted?-1:1})).map((function(t){return Object(n.jsx)("div",{children:e.renderPost(t)})}));return Object(n.jsx)(v.a,{children:t})}if("undefined"!=typeof this.state.postId&&this.props.posts.posts!==[]){var s=this.props.posts.posts.data.filter((function(t){return t.id===parseInt(e.state.postId)}))[0];return Object(n.jsx)(v.a,{children:this.renderPost(s)})}console.log("How did we get here. Props: ",JSON.stringify(this.props))}},{key:"renderPost",value:function(e){var t=this;return Object(n.jsxs)(P.a,{className:"postcard",children:[Object(n.jsx)(E.a,{children:Object(n.jsxs)(M.a,{children:[Object(n.jsx)(M.a,{left:!0,href:"#",children:Object(n.jsx)(M.a,{object:!0,src:"/favicon-32x32.png",alt:"placeholder",className:"avatar"})}),Object(n.jsxs)(M.a,{body:!0,children:[Object(n.jsx)(M.a,{heading:!0,children:e.title}),e.body]})]})}),Object(n.jsx)(D.a,{children:Object(n.jsxs)(T.a,{children:[Object(n.jsxs)(I.a,{children:[e.user," --- ",new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0,year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e.posted)))]}),Object(n.jsxs)(I.a,{className:"text-right",children:[Object(n.jsx)(L.a,{color:"link",children:Object(n.jsx)(h.b,{to:"/blog/"+e.id,children:"Link"})}),"---",Object(n.jsx)(L.a,{color:"link",onClick:function(){t.setState({editPost:e}),t.toggleEditModal()},children:"Edit"})]})]})})]})}},{key:"render",value:function(){var e=this;return Object(n.jsxs)(v.a,{children:[Object(n.jsxs)(T.a,{children:[Object(n.jsx)(I.a,{className:"text-left",children:this.state.postId?Object(n.jsx)(L.a,{color:"link",children:Object(n.jsx)(h.b,{to:"/blog",children:"< Back to all posts"})}):null}),Object(n.jsx)(I.a,{className:"text-right",children:Object(n.jsx)(L.a,{onClick:function(){console.log("Create post button clicked"),e.toggleCreateModal()},color:"primary",children:"Create Post"})}),this.props.isLoading?Object(n.jsx)(pe,{}):this.renderPosts()]}),this.state.createModal?Object(n.jsx)(ue,{handleSubmit:this.handleCreate,toggle:this.toggleCreateModal,type:"create"}):null,this.state.editModal?Object(n.jsx)(ue,{handleSubmit:this.handleEdit,toggle:this.toggleEditModal,type:"edit",post:this.state.editPost,handleDelete:this.handleDelete}):null]})}}]),s}(a.Component),Oe=Object(u.g)(Object(S.b)((function(e){return{posts:e.posts}}),(function(e){return{fetchPosts:function(){e($())},submitPost:function(t){e(function(e){return function(t){console.log("Submit: title: ",e.title," body: ",e.body," user: ",e.user),z.a.defaults.xsrfCookieName="csrftoken",z.a.defaults.xsrfHeaderName="X-CSRFToken",z.a.post("/api/posts/",e,{headers:{"Content-Type":"application/json"}}).then((function(s){return t(U(e))})).then((function(){return t($())})).catch((function(e){t(K(e.message)),console.log(e)}))}}(t))},editPost:function(t){e(function(e){return function(t){console.log("Edit post: ",JSON.stringify(e)),z.a.defaults.xsrfCookieName="csrftoken",z.a.defaults.xsrfHeaderName="X-CSRFToken",z.a.put("/api/posts/"+e.id+"/",{title:e.title,body:e.body,user:e.user},{headers:{"Content-Type":"application/json"}}).then((function(e){return t(Q(e))})).then((function(){return t($())})).catch((function(e){t(V(e.message)),console.log(e)}))}}(t))},deletePost:function(t){e(function(e){return function(t){console.log("Delete: ",e),z.a.defaults.xsrfCookieName="csrftoken",z.a.defaults.xsrfHeaderName="X-CSRFToken",z.a.delete("/api/posts/"+e).then((function(e){return t(W(e))})).then((function(){return t($())})).catch((function(e){return t(Z(e))}))}}(t))}}}))(be)),ge=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{children:"About section... this is a react single page app with django/mongo back end"})}}]),s}(a.Component),fe=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(k,{}),Object(n.jsxs)(u.d,{location:e.location,children:[Object(n.jsx)(u.b,{path:"/home",component:C}),Object(n.jsx)(u.b,{exact:!0,path:"/blog",component:Object(u.g)(Oe)}),Object(n.jsx)(u.b,{path:"/blog/:postId",component:Object(u.g)(Oe)}),Object(n.jsx)(u.b,{path:"/blog/edit/:postId",component:Object(u.g)(Oe)}),Object(n.jsx)(u.b,{path:"/about",component:ge}),Object(n.jsx)(u.a,{to:"/home"})]}),Object(n.jsx)(N,{})]})},xe=s(23),ye=s(9),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:null,post:t.payload});case _:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:null,posts:t.payload});case w:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:null,post:t.payload});case F:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:null,posts:[]});case J:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!0,errMess:null,posts:[]});case H:case B:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:t.payload,posts:[]});case G:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:t.payload,post:[]});case R:case X:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:null,post:t.payload});case Y:return Object(ye.a)(Object(ye.a)({},e),{},{isLoading:!1,errMess:t.payload,post:[]});default:return e}},ve=s(47),ke=s.n(ve),Ne=s(48),Ce=Object(xe.d)(Object(xe.c)({posts:me}),Object(xe.a)(Ne.a,ke.a)),Se=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(h.a,{children:Object(n.jsx)(S.a,{store:Ce,children:Object(n.jsx)(fe,{})})})})}}]),s}(a.Component),Pe=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,112)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;s(e),n(e),a(e),o(e),i(e)}))};s(85),s(86),s(87);c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(Se,{})}),document.getElementById("root")),Pe()}},[[88,1,2]]]);
//# sourceMappingURL=main.385918cc.chunk.js.map